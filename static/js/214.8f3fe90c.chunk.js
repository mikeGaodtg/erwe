"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[214],{8214:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var n=a(1413),s=a(5671),l=a(3144),r=a(136),i=a(8557),d=a(2791),c=a(6871),o=a(3272),h=a(7031),u=a(7309),m=a(6106),x=a(914),g=a(6435),f=a(2385),Z="teacher_card__qJJay",p=a(8845);function j(e){return(0,p.Z)({url:"/teacher/teacherList",method:"post",data:e})}function y(e){return(0,p.Z)({url:"/teacher/editTeacher",method:"post",data:e})}function v(e){return(0,p.Z)({url:"/teacher/delete",method:"post",data:e})}function b(e){return(0,p.Z)({url:"/teacher/batchDelete",method:"post",data:e})}var k=a(1847),D=a(3695),w=a(1460),C=a(4960),I=a(2426),R=a.n(I),S=a(9396),q=a(184),N=(w.Z.RangePicker,g.Z.Option),M=function(e){(0,r.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,s.Z)(this,a);for(var l=arguments.length,r=new Array(l),i=0;i<l;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.toggleVis(!1)},e.handleOk=function(){e.myRef.validateFields().then((function(t){var a=e.props.record.id,s=R()(t.birth).format("DD-MM-YYYY"),l=R()(t.date).format("DD-MM-YYYY");("edit techer"==e.props.title?y((0,n.Z)((0,n.Z)({},t),{},{birth:s,startday:l,id:a})):(0,S.uh)((0,n.Z)((0,n.Z)({},t),{},{birth:s,startday:l}))).then((function(t){0===t.code&&(D.ZP.success(t.msg),e.props.toggleVis(!1),e.myRef.resetFields(),e.props.loadData())}))})).catch((function(e){return console.log(e)}))},e}return(0,l.Z)(a,[{key:"componentDidUpdate",value:function(){console.log(this.props.record)}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.title;return(0,q.jsx)("div",{children:(0,q.jsx)(k.Z,{title:n,visible:a,width:"800px",onOk:this.handleOk,onCancel:this.handleCancel,children:(0,q.jsx)(o.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},ref:function(t){return e.myRef=t},children:(0,q.jsxs)(m.Z,{children:[(0,q.jsxs)(x.Z,{span:12,children:[(0,q.jsx)(o.Z.Item,{label:"\u59d3\u540d",name:"name",rules:[{required:!0,message:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(h.Z,{})}),(0,q.jsx)(o.Z.Item,{label:"\u6027\u522b",name:"gender",rules:[{required:!0,message:"\u6027\u522b\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsxs)(g.Z,{children:[(0,q.jsx)(N,{value:1,children:"\u7537"}),(0,q.jsx)(N,{value:2,children:"\u5973"})]})}),(0,q.jsx)(o.Z.Item,{label:"\u7ea7\u522b",name:"level",rules:[{required:!0,message:"\u7ea7\u522b\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsxs)(g.Z,{children:[(0,q.jsx)(N,{value:1,children:"\u521d\u7ea7\u6559\u5e08"}),(0,q.jsx)(N,{value:2,children:"\u4e2d\u7ea7\u6559\u5e08"}),(0,q.jsx)(N,{value:3,children:"\u9ad8\u7ea7\u6559\u5e08"}),(0,q.jsx)(N,{value:4,children:"\u7279\u7ea7\u6559\u5e08"})]})}),(0,q.jsx)(o.Z.Item,{label:"\u5e74\u7ea7",name:"grade",rules:[{required:!0,message:"\u5e74\u7ea7\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(h.Z,{})}),(0,q.jsx)(o.Z.Item,{label:"\u79d1\u76ee",name:"subject",rules:[{required:!0,message:"\u79d1\u76ee\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(h.Z,{})}),(0,q.jsx)(o.Z.Item,{label:"\u5165\u804c\u65e5\u671f",name:"date",rules:[{required:!0,message:"\u5165\u804c\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(w.Z,{style:{width:"100%"}})})]}),(0,q.jsxs)(x.Z,{span:12,children:[(0,q.jsx)(o.Z.Item,{label:"\u7c7b\u578b",name:"type",rules:[{required:!0,message:"\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsxs)(C.ZP.Group,{children:[(0,q.jsx)(C.ZP,{value:"1",children:"\u5168\u804c"}),(0,q.jsx)(C.ZP,{value:"2",children:"\u517c\u804c"})]})}),(0,q.jsx)(o.Z.Item,{label:"\u624b\u673a\u53f7\u7801",name:"tel",rules:[{required:!0,message:"\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(h.Z,{})}),(0,q.jsx)(o.Z.Item,{label:"\u6bd5\u4e1a\u9662\u6821",name:"school",rules:[{required:!0,message:"\u6bd5\u4e1a\u9662\u6821\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(h.Z,{})}),(0,q.jsx)(o.Z.Item,{label:"\u51fa\u751f\u5e74\u6708",name:"birth",rules:[{required:!0,message:"\u51fa\u751f\u5e74\u6708\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(w.Z,{style:{width:"100%"}})}),(0,q.jsx)(o.Z.Item,{label:"\u5bb6\u5ead\u4f4f\u5740",name:"address",rules:[{required:!0,message:"\u5bb6\u5ead\u4f4f\u5740\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(h.Z,{})}),(0,q.jsx)(o.Z.Item,{label:"\u5b66\u5386",name:"education",rules:[{required:!0,message:"\u5b66\u5386\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,q.jsx)(h.Z,{})})]})]})})})})}}]),a}(d.Component),P=a(9221),Y=g.Z.Option,V=function(e){(0,r.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,s.Z)(this,a);for(var l=arguments.length,r=new Array(l),i=0;i<l;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={disable:!0,data:[],pageData:{page:1,pageSize:10},loading:!1,visible:!1,total:0,formData:{},record:{},title:"",selectedRowKeys:[]},e.formRef=d.createRef(),e.loadData=function(){e.setState({loading:!0});var t=e.state,a=t.pageData,s=t.formData;j((0,n.Z)((0,n.Z)({},s),a)).then((function(t){return e.setState({data:t.data,loading:!1,total:t.total})}))},e.search=function(){var t=e.formRef.current.getFieldsValue(!0);e.setState({formData:t},(function(){e.loadData(),e.setState({formData:{}})}))},e.reset=function(){e.formRef.current.resetFields(),e.setState({page:1,pageSize:10},(function(){e.loadData()}))},e.showModel=function(){e.setState({visible:!0,title:"add employee"}),e.addRef.myRef.resetFields()},e.toggleVis=function(t){e.setState({visible:t})},e.pageChange=function(t,a){e.setState({pageData:{page:t,pageSize:a}},(function(){this.loadData()}))},e.edit=function(t){e.setState({record:t,visible:!0,title:"edit techer"},(function(){var a=R()(t.birth),s=R()(t.date);e.addRef.myRef.setFieldsValue((0,n.Z)((0,n.Z)({},t),{},{birth:a,date:s}))}))},e.singleDelete=function(t){v({id:t}).then((function(t){e.loadData(),0===t.code&&D.ZP.success(t.msg)}))},e.DeleteMany=function(){b({ids:e.state.selectedRowKeys}).then((function(t){e.loadData(),0===t.code&&(D.ZP.success(t.msg),e.setState({disable:!0}))}))},e.selectChange=function(t){e.setState({selectedRowKeys:t,disable:!t.length})},e}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.disable,n=t.data,s=t.loading,l=t.visible,r=t.total,i=t.record,d=t.title,p=t.selectedRowKeys,j=[{title:"num",dataIndex:"index",key:"index",align:"center",render:function(e,t,a){return a+1}},{title:"name",dataIndex:"name",key:"name",align:"center"},{title:"gender",dataIndex:"gender",key:"gender",align:"center",render:function(e){return 1==e?"male":"female"}},{title:"level",dataIndex:"level",key:"level",align:"center",render:function(e){return 1==e?"junior":2==e?"intermedia":"senior"}},{title:"grade",dataIndex:"grade",key:"grade",align:"center"},{title:"startday",dataIndex:"date",key:"date",align:"center"},{title:"type",dataIndex:"type",key:"type",align:"center",render:function(e){return 1==e?"fulltime":"partime"}},{title:"school",dataIndex:"school",key:"school",align:"center"},{title:"DOB",dataIndex:"birth",key:"birth",align:"center"},{title:"address",dataIndex:"address",key:"address",align:"center"},{title:"operation",dataIndex:"operation",key:"operation",fixed:"right",align:"center",width:"160px",render:function(t,a){return(0,q.jsxs)("div",{children:[(0,q.jsx)(u.Z,{type:"primary",size:"small",onClick:function(){return e.edit(a)},children:"\xa0\xa0Edit\xa0\xa0 "}),(0,q.jsx)(u.Z,{danger:!0,size:"small",className:"mt ml",onClick:function(){e.singleDelete(a.id)},children:"Delete"})]})}}];return(0,q.jsxs)("div",{children:[(0,q.jsx)(c.Z,{className:Z,children:(0,q.jsx)(o.Z,{ref:this.formRef,labelCol:{span:8},wrapperCol:{span:16},children:(0,q.jsxs)(m.Z,{gutter:16,children:[(0,q.jsx)(x.Z,{className:"gutter-row",span:6,children:(0,q.jsx)(o.Z.Item,{label:"name",name:"name",children:(0,q.jsx)(h.Z,{})})}),(0,q.jsx)(x.Z,{className:"gutter-row",span:6,children:(0,q.jsx)(o.Z.Item,{label:"subject",name:"subject",children:(0,q.jsxs)(g.Z,{children:[(0,q.jsx)(Y,{value:"",children:"all"}),(0,q.jsx)(Y,{value:"\u8bed\u6587",children:"Chinese"}),(0,q.jsx)(Y,{value:"\u6570\u5b66",children:"Math"}),(0,q.jsx)(Y,{value:"\u82f1\u8bed",children:"English"}),(0,q.jsx)(Y,{value:"\u7269\u7406",children:"Physics"}),(0,q.jsx)(Y,{value:"\u5316\u5b66",children:"Chemistry"}),(0,q.jsx)(Y,{value:"\u751f\u7269",children:"Biology"})]})})}),(0,q.jsx)(x.Z,{className:"gutter-row",span:6,children:(0,q.jsx)(o.Z.Item,{label:"phone",name:"phone",children:(0,q.jsx)(h.Z,{})})}),(0,q.jsxs)(x.Z,{className:"gutter-row",span:6,children:[(0,q.jsx)(u.Z,{className:"ml",onClick:this.search,children:" search  "}),(0,q.jsx)(u.Z,{className:"ml",onClick:this.reset,children:" reset"})]})]})})}),(0,q.jsxs)(c.Z,{className:Z,children:[(0,q.jsx)(u.Z,{className:"ml",danger:!0,disabled:a,onClick:this.DeleteMany,children:" BatchDelete "}),(0,q.jsx)(u.Z,{className:"ml",onClick:this.showModel,children:" New Employee"})]}),(0,q.jsxs)(c.Z,{className:Z,children:[(0,q.jsx)(f.Z,{loading:s,dataSource:n,columns:j,scroll:{x:1400},rowKey:function(e){return e.id},pagination:!1,rowSelection:{type:"checkbox",selectedRowKeys:p,onChange:this.selectChange}}),(0,q.jsx)(P.Z,{showQuickJumper:!0,showSizeChanger:!0,total:r,onChange:this.pageChange})]}),(0,q.jsx)(M,{ref:function(t){return e.addRef=t},visible:l,toggleVis:this.toggleVis,loadData:this.loadData,record:i,title:d})]})}}]),a}(d.Component)}}]);
//# sourceMappingURL=214.8f3fe90c.chunk.js.map